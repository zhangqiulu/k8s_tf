if [ -d "tf_task_logs" ];then
echo "remove tf_task_logs"
rm -rf tf_task_logs
mkdir tf_task_logs
else
mkdir tf_task_logs
fi
nohup kubectl exec -it pod-tensorflow-ps-0 -- python3 /workspace/tf_test.py --ps_hosts=,svc-tensorflow-ps-0:2222,svc-tensorflow-ps-1:2223 --worker_hosts=,svc-tensorflow-worker-0:3333,svc-tensorflow-worker-1:3334,svc-tensorflow-worker-2:3335,svc-tensorflow-worker-3:3336,svc-tensorflow-worker-4:3337,svc-tensorflow-worker-5:3338,svc-tensorflow-worker-6:3339,svc-tensorflow-worker-7:3340,svc-tensorflow-worker-8:3341,svc-tensorflow-worker-9:3342,svc-tensorflow-worker-10:3343,svc-tensorflow-worker-11:3344 --job_name=ps --task_index=0 > tf_task_logs/pod-tensorflow-ps-0.logs 2>&1&
sleep 0.5s
nohup kubectl exec -it pod-tensorflow-ps-1 -- python3 /workspace/tf_test.py --ps_hosts=,svc-tensorflow-ps-0:2222,svc-tensorflow-ps-1:2223 --worker_hosts=,svc-tensorflow-worker-0:3333,svc-tensorflow-worker-1:3334,svc-tensorflow-worker-2:3335,svc-tensorflow-worker-3:3336,svc-tensorflow-worker-4:3337,svc-tensorflow-worker-5:3338,svc-tensorflow-worker-6:3339,svc-tensorflow-worker-7:3340,svc-tensorflow-worker-8:3341,svc-tensorflow-worker-9:3342,svc-tensorflow-worker-10:3343,svc-tensorflow-worker-11:3344 --job_name=ps --task_index=1 > tf_task_logs/pod-tensorflow-ps-1.logs 2>&1&
sleep 0.5s
sleep 5s
nohup kubectl exec -it pod-tensorflow-worker-0 -- python3 /workspace/tf_test.py --ps_hosts=,svc-tensorflow-ps-0:2222,svc-tensorflow-ps-1:2223 --worker_hosts=,svc-tensorflow-worker-0:3333,svc-tensorflow-worker-1:3334,svc-tensorflow-worker-2:3335,svc-tensorflow-worker-3:3336,svc-tensorflow-worker-4:3337,svc-tensorflow-worker-5:3338,svc-tensorflow-worker-6:3339,svc-tensorflow-worker-7:3340,svc-tensorflow-worker-8:3341,svc-tensorflow-worker-9:3342,svc-tensorflow-worker-10:3343,svc-tensorflow-worker-11:3344  --job_name=worker --task_index=0 > tf_task_logs/pod-tensorflow-worker-0.logs 2>&1&
sleep 0.5s
nohup kubectl exec -it pod-tensorflow-worker-1 -- python3 /workspace/tf_test.py --ps_hosts=,svc-tensorflow-ps-0:2222,svc-tensorflow-ps-1:2223 --worker_hosts=,svc-tensorflow-worker-0:3333,svc-tensorflow-worker-1:3334,svc-tensorflow-worker-2:3335,svc-tensorflow-worker-3:3336,svc-tensorflow-worker-4:3337,svc-tensorflow-worker-5:3338,svc-tensorflow-worker-6:3339,svc-tensorflow-worker-7:3340,svc-tensorflow-worker-8:3341,svc-tensorflow-worker-9:3342,svc-tensorflow-worker-10:3343,svc-tensorflow-worker-11:3344  --job_name=worker --task_index=1 > tf_task_logs/pod-tensorflow-worker-1.logs 2>&1&
sleep 0.5s
nohup kubectl exec -it pod-tensorflow-worker-2 -- python3 /workspace/tf_test.py --ps_hosts=,svc-tensorflow-ps-0:2222,svc-tensorflow-ps-1:2223 --worker_hosts=,svc-tensorflow-worker-0:3333,svc-tensorflow-worker-1:3334,svc-tensorflow-worker-2:3335,svc-tensorflow-worker-3:3336,svc-tensorflow-worker-4:3337,svc-tensorflow-worker-5:3338,svc-tensorflow-worker-6:3339,svc-tensorflow-worker-7:3340,svc-tensorflow-worker-8:3341,svc-tensorflow-worker-9:3342,svc-tensorflow-worker-10:3343,svc-tensorflow-worker-11:3344  --job_name=worker --task_index=2 > tf_task_logs/pod-tensorflow-worker-2.logs 2>&1&
sleep 0.5s
nohup kubectl exec -it pod-tensorflow-worker-3 -- python3 /workspace/tf_test.py --ps_hosts=,svc-tensorflow-ps-0:2222,svc-tensorflow-ps-1:2223 --worker_hosts=,svc-tensorflow-worker-0:3333,svc-tensorflow-worker-1:3334,svc-tensorflow-worker-2:3335,svc-tensorflow-worker-3:3336,svc-tensorflow-worker-4:3337,svc-tensorflow-worker-5:3338,svc-tensorflow-worker-6:3339,svc-tensorflow-worker-7:3340,svc-tensorflow-worker-8:3341,svc-tensorflow-worker-9:3342,svc-tensorflow-worker-10:3343,svc-tensorflow-worker-11:3344  --job_name=worker --task_index=3 > tf_task_logs/pod-tensorflow-worker-3.logs 2>&1&
sleep 0.5s
nohup kubectl exec -it pod-tensorflow-worker-4 -- python3 /workspace/tf_test.py --ps_hosts=,svc-tensorflow-ps-0:2222,svc-tensorflow-ps-1:2223 --worker_hosts=,svc-tensorflow-worker-0:3333,svc-tensorflow-worker-1:3334,svc-tensorflow-worker-2:3335,svc-tensorflow-worker-3:3336,svc-tensorflow-worker-4:3337,svc-tensorflow-worker-5:3338,svc-tensorflow-worker-6:3339,svc-tensorflow-worker-7:3340,svc-tensorflow-worker-8:3341,svc-tensorflow-worker-9:3342,svc-tensorflow-worker-10:3343,svc-tensorflow-worker-11:3344  --job_name=worker --task_index=4 > tf_task_logs/pod-tensorflow-worker-4.logs 2>&1&
sleep 0.5s
nohup kubectl exec -it pod-tensorflow-worker-5 -- python3 /workspace/tf_test.py --ps_hosts=,svc-tensorflow-ps-0:2222,svc-tensorflow-ps-1:2223 --worker_hosts=,svc-tensorflow-worker-0:3333,svc-tensorflow-worker-1:3334,svc-tensorflow-worker-2:3335,svc-tensorflow-worker-3:3336,svc-tensorflow-worker-4:3337,svc-tensorflow-worker-5:3338,svc-tensorflow-worker-6:3339,svc-tensorflow-worker-7:3340,svc-tensorflow-worker-8:3341,svc-tensorflow-worker-9:3342,svc-tensorflow-worker-10:3343,svc-tensorflow-worker-11:3344  --job_name=worker --task_index=5 > tf_task_logs/pod-tensorflow-worker-5.logs 2>&1&
sleep 0.5s
nohup kubectl exec -it pod-tensorflow-worker-6 -- python3 /workspace/tf_test.py --ps_hosts=,svc-tensorflow-ps-0:2222,svc-tensorflow-ps-1:2223 --worker_hosts=,svc-tensorflow-worker-0:3333,svc-tensorflow-worker-1:3334,svc-tensorflow-worker-2:3335,svc-tensorflow-worker-3:3336,svc-tensorflow-worker-4:3337,svc-tensorflow-worker-5:3338,svc-tensorflow-worker-6:3339,svc-tensorflow-worker-7:3340,svc-tensorflow-worker-8:3341,svc-tensorflow-worker-9:3342,svc-tensorflow-worker-10:3343,svc-tensorflow-worker-11:3344  --job_name=worker --task_index=6 > tf_task_logs/pod-tensorflow-worker-6.logs 2>&1&
sleep 0.5s
nohup kubectl exec -it pod-tensorflow-worker-7 -- python3 /workspace/tf_test.py --ps_hosts=,svc-tensorflow-ps-0:2222,svc-tensorflow-ps-1:2223 --worker_hosts=,svc-tensorflow-worker-0:3333,svc-tensorflow-worker-1:3334,svc-tensorflow-worker-2:3335,svc-tensorflow-worker-3:3336,svc-tensorflow-worker-4:3337,svc-tensorflow-worker-5:3338,svc-tensorflow-worker-6:3339,svc-tensorflow-worker-7:3340,svc-tensorflow-worker-8:3341,svc-tensorflow-worker-9:3342,svc-tensorflow-worker-10:3343,svc-tensorflow-worker-11:3344  --job_name=worker --task_index=7 > tf_task_logs/pod-tensorflow-worker-7.logs 2>&1&
sleep 0.5s
nohup kubectl exec -it pod-tensorflow-worker-8 -- python3 /workspace/tf_test.py --ps_hosts=,svc-tensorflow-ps-0:2222,svc-tensorflow-ps-1:2223 --worker_hosts=,svc-tensorflow-worker-0:3333,svc-tensorflow-worker-1:3334,svc-tensorflow-worker-2:3335,svc-tensorflow-worker-3:3336,svc-tensorflow-worker-4:3337,svc-tensorflow-worker-5:3338,svc-tensorflow-worker-6:3339,svc-tensorflow-worker-7:3340,svc-tensorflow-worker-8:3341,svc-tensorflow-worker-9:3342,svc-tensorflow-worker-10:3343,svc-tensorflow-worker-11:3344  --job_name=worker --task_index=8 > tf_task_logs/pod-tensorflow-worker-8.logs 2>&1&
sleep 0.5s
nohup kubectl exec -it pod-tensorflow-worker-9 -- python3 /workspace/tf_test.py --ps_hosts=,svc-tensorflow-ps-0:2222,svc-tensorflow-ps-1:2223 --worker_hosts=,svc-tensorflow-worker-0:3333,svc-tensorflow-worker-1:3334,svc-tensorflow-worker-2:3335,svc-tensorflow-worker-3:3336,svc-tensorflow-worker-4:3337,svc-tensorflow-worker-5:3338,svc-tensorflow-worker-6:3339,svc-tensorflow-worker-7:3340,svc-tensorflow-worker-8:3341,svc-tensorflow-worker-9:3342,svc-tensorflow-worker-10:3343,svc-tensorflow-worker-11:3344  --job_name=worker --task_index=9 > tf_task_logs/pod-tensorflow-worker-9.logs 2>&1&
sleep 0.5s
nohup kubectl exec -it pod-tensorflow-worker-10 -- python3 /workspace/tf_test.py --ps_hosts=,svc-tensorflow-ps-0:2222,svc-tensorflow-ps-1:2223 --worker_hosts=,svc-tensorflow-worker-0:3333,svc-tensorflow-worker-1:3334,svc-tensorflow-worker-2:3335,svc-tensorflow-worker-3:3336,svc-tensorflow-worker-4:3337,svc-tensorflow-worker-5:3338,svc-tensorflow-worker-6:3339,svc-tensorflow-worker-7:3340,svc-tensorflow-worker-8:3341,svc-tensorflow-worker-9:3342,svc-tensorflow-worker-10:3343,svc-tensorflow-worker-11:3344  --job_name=worker --task_index=10 > tf_task_logs/pod-tensorflow-worker-10.logs 2>&1&
sleep 0.5s
nohup kubectl exec -it pod-tensorflow-worker-11 -- python3 /workspace/tf_test.py --ps_hosts=,svc-tensorflow-ps-0:2222,svc-tensorflow-ps-1:2223 --worker_hosts=,svc-tensorflow-worker-0:3333,svc-tensorflow-worker-1:3334,svc-tensorflow-worker-2:3335,svc-tensorflow-worker-3:3336,svc-tensorflow-worker-4:3337,svc-tensorflow-worker-5:3338,svc-tensorflow-worker-6:3339,svc-tensorflow-worker-7:3340,svc-tensorflow-worker-8:3341,svc-tensorflow-worker-9:3342,svc-tensorflow-worker-10:3343,svc-tensorflow-worker-11:3344  --job_name=worker --task_index=11 > tf_task_logs/pod-tensorflow-worker-11.logs 2>&1&
sleep 0.5s
